<!doctype html><html lang='en'><head>
<meta charset='utf-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/>
<title>ABC Center — App</title>
<link rel='manifest' href='/site.webmanifest'><meta name='theme-color' content='#1E3A8A'>
<script src='https://cdn.tailwindcss.com'></script>
<script>if('serviceWorker' in navigator){addEventListener('load',()=>navigator.serviceWorker.register('/sw.js'));}</script>
<script defer src='app.js'></script>
<style>[v-cloak]{display:none}</style>
</head><body class='bg-slate-50 text-slate-900'>
<div id='app' v-cloak class='p-6 max-w-5xl mx-auto'>
  <div class='flex items-center justify-between mb-4'>
    <h1 class='text-2xl font-bold'>ABC Center</h1>
    <button class='px-3 py-2 rounded-xl border' onclick='logout()'>Logout</button>
  </div>
  <p class='opacity-80 mb-6' id='welcome'></p>
  <div class='grid md:grid-cols-3 gap-4'>
    <div class='rounded-xl border bg-white p-4'><h2 class='font-semibold'>Customers</h2></div>
    <div class='rounded-xl border bg-white p-4'><h2 class='font-semibold'>Sales & Invoices</h2></div>
    <div class='rounded-xl border bg-white p-4'><h2 class='font-semibold'>Reports</h2></div>
  </div>

  <div class='rounded-xl border bg-white p-4 mt-4'>
    <h2 class='font-semibold mb-2'>AI Assistant</h2>
    <p class='text-sm opacity-80 mb-3'>Ask for help with marketing copy, CRM follow-ups, or sales ideas.</p>
    <textarea id='aiq' class='w-full border rounded-md p-2' rows='4' placeholder='e.g., Write a 3-sentence product description for my business'></textarea>
    <div class='mt-2 flex gap-2'>
      <button class='px-3 py-2 rounded-xl border' onclick='askAI()'>Ask AI</button>
      <span id='aiLoading' class='text-sm opacity-70' style='display:none'>Thinking…</span>
    </div>
    <pre class='mt-3 whitespace-pre-wrap text-sm' id='aiOut'></pre>
  </div>

  <div class='mt-6'><a class='underline' href='../index.html'>← Back to home</a></div>
</div>
<script>
function logout(){ localStorage.removeItem('abc_state'); location.href='../index.html'; }
(function(){ let s={}; try{s=JSON.parse(localStorage.getItem('abc_state')||'{}')}catch(e){{}}; document.getElementById('welcome').textContent = 'Welcome, ' + (s.user && s.user.username || 'User') + '. Plan: ' + (s.settings && s.settings.plan || 'free'); })();
async function askAI(){ const q=document.getElementById('aiq').value.trim(); if(!q) return; document.getElementById('aiLoading').style.display='inline';
  try{ const r=await fetch('../api/ai',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({messages:[{role:'system',content:'You are a helpful small-business assistant for CRM, sales, and marketing.'},{role:'user',content:q}]})});
    const data=await r.json(); document.getElementById('aiOut').textContent = (data.text || data.reply || data.error || 'No answer'); }
  catch(e){ document.getElementById('aiOut').textContent='AI request failed'; }
  finally{ document.getElementById('aiLoading').style.display='none'; }
}
</script>
</body></html>